---
Comment: "Please note that Jekyll will only convert files that also have a YAML header at the top."
---


require 'prawn'
require 'date'


module Fengb
  class Resume < Prawn::Document
    module Primitives
      def fmt_date(date, default=nil)
        return Date.parse(date).strftime("%b '%y") if date
        default || raise
      end

      def link(url, text)
        "<b><color rgb='435c96'><link href='#{url}'>#{text}</link></color></b>"
      end

      def nav(links)
        text links.map{|text, url| link(url, text)}.join('  •  '), inline_format: true, align: :center
      end

      def dl(options)
        move_up 1
        table_adjusted options.map{|cat, val| ["#{cat}:", val]}, cell_style: {borders: [], padding: [1, 0]} do
          column(0).style padding_right: 4, font_style: :bold
        end
        move_up 1
      end

      def ul(values, options={})
        move_up 1
        table_adjusted values.map{|e| ['•', e]}, cell_style: options.merge(borders: [], padding: 0) do
          column(0).style padding_left: 2, width: 10
        end
        move_up 1
      end

      # Table whitespace is off...
      def table_adjusted(*args, &block)
        move_up 2
        table *args, &block
        move_down 2
      end
    end

    module Sectioning
      def gutter
        8
      end

      def header(title)
        text title, align: :center, size: 18, style: :bold
        move_up 1
        font_size 11 do
          yield
        end
      end

      def section(title)
        move_down 1.5*gutter

        text_box title.upcase, at: [gutter, cursor+1], size: 16, style: :bold, rotate: 270
        indent 3*gutter do
          bounding_box([0, cursor], width: bounds.width) do
            @locations = 0
            yield

            stroke do
              vertical_line bounds.top+1, bounds.bottom+2, at: -gutter
            end
          end
        end
      end

      def location(name, url)
        if @locations != 0
          move_down gutter
        end
        @locations += 1

        text link(url, name), inline_format: true, size: 12
        @role = 0

        indent gutter do
          yield
        end
      end

      def role(title, options)
        if @role != 0
          move_down gutter/2
        end
        @role += 1

        text title, size: 10, style: :bold
        font 'Courier' do
          text '%s - %s' % [fmt_date(options[:from]), fmt_date(options[:to], 'present')], size: 8, style: :bold
        end

        if options[:duties]
          move_up 20.2
          indent 148 do
            options[:duties].each do |line|
              text line
            end
          end
        end
      end
    end

    include Primitives, Sectioning
    def self.render(options={}, &block)
      pdf = new(options, &block)
      pdf.render
    end
  end
end

Fengb::Resume.render do
  font_size 10
  header 'Benjamin Feng' do
    nav('(312) 725-2842'     => 'tel:+1-312-725-2842',
        'contact@fengb.info' => 'mailto:contact@fengb.info')
  end

  section 'Skills' do
    dl(Languages:  'C, Javascript, Objective-C, Python, Ruby, SQL',
       Frameworks: 'Django, jQuery, Ruby on Rails',
       Versioning: 'Git, Mercurial, Perforce, Subversion',
       Platforms:  'Arch Linux, Mac OS X, AWS, Heroku')
  end

  section 'Employment' do
    location 'FENGB TECHNOLOGIES', 'http://fengb.info' do
      role 'Independent Consultant',
        from: '2013-08-05'
    end

    location 'Enova International', 'http://www.enova.com' do
      role 'Lead Software Engineer',
        from: '2012-04-03',
        duties: ['Acted as technical team lead for 6 developers and 3 QA',
                 'Converted team / business to lean UX design processes',
                 'Architected solutions related to accounting and underwriting']

      role 'Sr. Software Engineer II',
        from: '2011-07-01', to: '2012-04-02',
        duties: ['Drove three highly aggressive IPO related projects',
                 'Integrated with banking systems and credit reporting agencies',
                 'Onboarded newly hired developers and managers']

      role 'Sr. UI Engineer',
        from: '2010-07-01', to: '2011-06-30',
        duties: ['Launched mobile web for all existing products',
                 'Updated the UI to maintain compliance with rapidly changing legal environment']

      role 'UI Engineer',
        from: '2009-10-19', to: '2010-06-30',
        duties: ['Launched frontend for new product with over $100 million yearly revenues',
                 'Recreated legacy UI on new platform with hundreds of thousands of customers']
    end

    location 'Crusader Storm', 'http://web.archive.org/web/20100623115357/http://www.crusaderstorm.com/' do
      role 'Founder',
        from: '2010-05-07', to: '2011-05-06',
        duties: ['Incubated iPhone app from concept to release',
                 'Designed responsive website with graceful degradation']
    end

    location 'Business Logic', 'http://businesslogic.com/' do
      role 'Software Engineer',
        from: '2007-06-04', to: '2009-08-04',
        duties: ['Repurposed existing single-threaded engine into a scalable aggregator',
                 'Maintained legacy SOAP to REST translation layer',
                 'Created testing framework for separating data and verification']
    end

    location 'Rose-Hulman Ventures', 'http://rhventures.org/' do
      role 'Computer Engineering Intern',
        from: '2006-06-12', to: '2007-03-16',
        duties: ['Optimized embedded software for memory efficiency',
                 'Enhanced C++ MFC application integrating with hardware controls']

      role 'Software Engineering Intern',
        from: '2005-06-06', to: '2006-06-09',
        duties: ['Coordinated a development team of 5',
                 'Worked with business on defining requirements']
    end
  end

  section 'Education' do
    location 'Rose-Hulman Institute of Technology', 'http://www.rose-hulman.edu/' do
      role 'B.S. Computer Engineering',
        from: '2003-09-04', to: '2007-05-26',
        duties: ['Minors in Computer Science & Economics']
    end
  end
end
