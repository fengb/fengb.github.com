---
Comment: "Please note that Jekyll will only convert files that also have a YAML header at the top."
---


require 'prawn'
require 'date'


module Fengb
  class Resume < Prawn::Document
    module Primitives
      def link(url, text)
        "<b><color rgb='435c96'><link href='#{url}'>#{text}</link></color></b>"
      end

      def nav(links)
        text links.map{|text, url| link(url, text)}.join('  •  '), inline_format: true, align: :center
      end

      def dl(options)
        move_up 1
        table_adjusted options.map{|cat, val| ["#{cat}:", val]}, cell_style: {borders: [], padding: [1, 0]} do
          style column(0), padding_right: 4
        end
        move_up 1
      end

      def ul(*values)
        move_up 1
        table_adjusted values.map{|e| ['•', e]}, cell_style: {borders: [], padding: [1, 0]} do
          style column(0), padding_left: 1, width: 10
        end
        move_up 1
      end

      # Table whitespace is off...
      def table_adjusted(*args, &block)
        move_up 2
        table *args, &block
        move_down 2
      end
    end

    module Sectioning
      def gutter
        8
      end

      def header(title)
        text title, align: :center, size: 18, style: :bold
        move_up 1
        font_size 11 do
          yield
        end
      end

      def section(title)
        move_down 1.5*gutter

        title_width = 128
        text_box title.upcase, at: [0, cursor - 1], width: (title_width - 2*gutter), align: :right, size: 16, style: :bold
        bounding_box([title_width, cursor], width: bounds.width - title_width) do
          move_down 1
          @locations = 0
          yield

          stroke do
            vertical_line bounds.top+2, bounds.bottom, at: -gutter
          end
        end
      end

      def location(name, url)
        if @locations != 0
          move_down gutter
        end
        @locations += 1

        text link(url, name), inline_format: true, size: 12
        @titles = 0

        title_width = 10
        bounding_box([title_width, cursor], width: bounds.width - title_width) do
          yield
        end
      end

      def title(title, options)
        if @titles == 0
          move_down gutter/4
        else
          move_down gutter/2
        end
        @titles += 1

        start_date = Date.parse(options[:from]).strftime('%b %Y')
        end_date = options[:to] ? Date.parse(options[:to]).strftime('%b %Y') : 'present'
        text "<b><font size='10.5'>#{title}</font></b> — #{start_date} to #{end_date}", inline_format: true

        move_down 1
        if block_given?
          yield
        end
      end
    end

    include Primitives, Sectioning
    def self.render(options={}, &block)
      pdf = new(options, &block)
      pdf.render
    end
  end
end

Fengb::Resume.render do
  font_size 10
  header 'Benjamin Feng' do
    nav('(312) 725-2842'     => 'tel:+1-312-725-2842',
        'contact@fengb.info' => 'mailto:contact@fengb.info')
  end

  section 'Objective' do
    text 'To solve intriguing and intricate problems with emphasis on usability, maintainability, and correctness.'
  end

  section 'Skills' do
    dl('Languages'  => 'C, Javascript, Objective-C, Python, Ruby, SQL',
       'Frameworks' => 'Django, jQuery, Ruby on Rails',
       'Versioning' => 'Git, Mercurial, Perforce, Subversion',
       'Software'   => 'Adobe Photoshop, Keynote, vi')
  end

  section 'Employment' do
    location('Enova International', 'http://www.enova.com') do
      title('Lead Software Engineer', from: '2012-04-03') do
        ul('Acted as technical team lead for 6 devs and 3 QA',
           'Architected full-stack solutions for freshly-launched product codebase',
           'Proposed and executed lean UX processes for customer driven designs')
      end

      title('Sr. Software Engineer II', from: '2011-07-01', to: '2012-04-02') do
        ul('Drove high priority projects with aggressive deadlines to completion',
           'Promoted security initiatives to eliminate attack vectors',
           'Onboarded newly hired developers and managers')
      end

      title('Sr. UI Engineer I', from: '2010-07-01', to: '2011-06-30') do
        ul('Updated the UI to maintain compliance with rapidly changing legal environments',
           'Helped launch mobile web for all existing products')
      end

      title('UI Engineer', from: '2010-07-01', to: '2011-06-30') do
        ul('Launched customer facing web solutions for products with millions of dollars of yearly transactions',
           'Worked with business and creative teams to deliver customer focused designs',
           'Optimized existing frontend for faster load times')
      end
    end

    location('Crusader Storm (defunct)', 'http://web.archive.org/web/20100623115357/http://www.crusaderstorm.com/') do
      title('Chief Technical Officer', from: '2010-05-07', to: '2011-05-06') do
        ul('Incubated iPhone app from concept to release',
           'Designed website using responsive web and graceful degradation techniques',
           'Produced original artwork for branding and marketing')
      end
    end

    location('Business Logic Corporation', 'http://businesslogic.com/') do
      title('Chief Technical Officer', from: '2007-06-04', to: '2009-08-04') do
        ul('Repurposed existing single-threaded financial advice engine into a scalable aggregator',
           'Maintained legacy SOAP API layer for a redesigned modern RESTful architecture',
           'Created testing framework for separating data configuration and verification')
      end
    end

    location('Rose-Hulman Ventures', 'http://rhventures.org/') do
      title('Computer Engineering Intern', from: '2006-06-12', to: '2007-03-16') do
        ul('Optimized chemical control software for space efficiency',
           'Enhanced C++ MFC application integrating with embedded circuit boards')
      end

      title('Computer Programming Intern', from: '2005-06-06', to: '2006-06-09') do
        ul('Coordinated development team to build a website for managing medical audio transcriptions',
           'Worked with business on defining requirements and creating new functionality')
      end
    end
  end

  section 'Education' do
    location('Rose-Hulman Institute of Technology', 'http://www.rose-hulman.edu/') do
      title('B.S. Computer Engineering', from: '2003-09-04', to: '2007-05-26') do
        text 'Minors in Computer Science & Economics'
      end
    end
  end
end
